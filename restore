#!/bin/bash
# Restore omarchy overrides from this repo to their config locations

set -e

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Config entries: "name:repo_subdir:config_subdir"
CONFIGS=(
    "hypr:hypr:hypr"
    "ghostty:ghostty:ghostty"
)

echo "Restoring omarchy overrides..."

for entry in "${CONFIGS[@]}"; do
    IFS=':' read -r name repo_subdir config_subdir <<< "$entry"
    
    if [ -d "$SCRIPT_DIR/$repo_subdir" ]; then
        mkdir -p ~/.config/"$config_subdir"
        cp -r "$SCRIPT_DIR/$repo_subdir"/. ~/.config/"$config_subdir"/
        echo "  - Restored $name"
    fi
done

# Reload hyprland if running
if command -v hyprctl &> /dev/null && hyprctl monitors &> /dev/null; then
    hyprctl reload
    echo "  - Reloaded hyprland"
fi

echo "Done!"
