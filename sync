#!/bin/bash
# Sync current omarchy configs to this repo for version control

set -e

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Config entries: "name:repo_subdir:config_subdir"
CONFIGS=(
    "hypr:hypr:hypr"
    "ghostty:ghostty:ghostty"
)

echo "Syncing omarchy configs to repo..."

for entry in "${CONFIGS[@]}"; do
    IFS=':' read -r name repo_subdir config_subdir <<< "$entry"
    
    if [ -d ~/.config/"$config_subdir" ]; then
        mkdir -p "$SCRIPT_DIR/$repo_subdir"
        rsync -a --exclude='*.bak*' ~/.config/"$config_subdir"/ "$SCRIPT_DIR/$repo_subdir"/
        echo "  - Synced $name"
    fi
done

echo "Done! Don't forget to commit and push your changes."
